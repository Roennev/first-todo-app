<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"> -->
  <title>todoList</title>
</head>

<body>
  <main>
    <div class="container">
      <h1 class="center-align">My todo list</h1>
      <div class="row">
        <div class="input-field col s6">
          <form>
            <label class="active" for="addtodo">Todo:</label>
            <input value="" id="add-todo-input" class="validate">
            <button id="add-todo-btn">Add todo</button>
          </form>
          <form>
            <label class="active" for="edittodo">Edit:</label>
            <input size="3" id="edit-todo-pos-input" class="validate">
            <input value="" id="edit-todo-text-input" class="validate">
            <button value="" id="edit-todo-button">Edit</button>
          </form>
          <form>
            <label class="active" for="remvoetodo">Remove:</label>
            <input size="3" value="" id="remove-todo-input" class="validate">
            <button id="remove-todo-btn">Remove todo</button>
          </form>
          <form>
            <label class="active" for="toggletodo">Toggle:</label>
            <input size="3" value="" id="toggle-todo-input" class="validate">
            <button id="toggle-todo-btn">Toggle todo</button>
          </form>
        </div>
        <button class="waves-effect waves-light btn" id="show-todo-btn">Display Todos</button>
        <button id="toggle-all-btn">Toggle all</button>
      </div>
    </div>
  </main>


  <script>
    var todos = [{
        todoText: 'Item 1',
        completed: false
      },
      {
        todoText: 'Item 2',
        completed: false
      },
      {
        todoText: 'Item 3',
        completed: false
      }
    ];

    function displayTodos() {
      for (var i = 0; i < todos.length; i++) {
        console.log('Todo: ' + todos[i].todoText + ' Completed: ' + todos[i].completed);
      }
    }

    function addTodo(e) {
      e.preventDefault();
      var initialTodoText = addTodoInput.value;
      if (initialTodoText != '') {
        todos.push({
          todoText: initialTodoText,
          completed: false
        });
        addTodoInput.value = '';
        displayTodos();
      } else {
        alert('Todo cannot be empty.')
      }
    }

    function editTodo(e) {
      e.preventDefault();
      var editTodoPosition = editTodoPositionInput.value;
      var editTodoText = editTodoTextInput.value;
      if (editTodoPosition != '' && editTodoText != '') {
        todos[editTodoPosition].todoText = editTodoText;
        editTodoPositionInput.value = '';
        editTodoTextInput.value = '';
        displayTodos();
      } else {
        alert('You have to enter a position and a change.')
      }
    }


    function deleteTodo(e) {
      e.preventDefault();
      var removeTodo = removeTodoInput.value;
      todos.splice(removeTodo, 1);
      displayTodos();
    }

    function toggleTodo(e) {
      e.preventDefault();
      var toggleTodoinput = toggleTodoInput.value;
      if (todos[toggleTodoinput].completed === false) {
        todos[toggleTodoinput].completed = true;
      } else {
        todos[toggleTodoinput].completed = false;
      }
      displayTodos();
    }

    function toggleAllTodos() {
      var completedTodos = 0;
      var notCompletedTodos = 0;
      for (var i = 0; i < todos.length; i++) {
        if (todos[i].completed === true) {
          completedTodos++;
        } else {
          notCompletedTodos++;
        }
      }
      if (completedTodos === todos.length) {
        for (var i = 0; i < todos.length; i++) {
          todos[i].completed = false;
        }
      } else {
        for (var i = 0; i < todos.length; i++) {
          todos[i].completed = true;
        }
      }
      displayTodos();
    }

    var displayTodosButton = document.getElementById('show-todo-btn');
    displayTodosButton.addEventListener('click', displayTodos);

    var toggleAllButton = document.getElementById('toggle-all-btn');
    toggleAllButton.addEventListener('click', toggleAllTodos);

    var addTodoButton = document.getElementById('add-todo-btn');
    var addTodoInput = document.getElementById('add-todo-input');
    addTodoButton.addEventListener('click', addTodo);

    var editTodoButton = document.getElementById('edit-todo-button');
    var editTodoPositionInput = document.getElementById('edit-todo-pos-input');
    var editTodoTextInput = document.getElementById('edit-todo-text-input');
    editTodoButton.addEventListener('click', editTodo);

    var removeTodoButton = document.getElementById('remove-todo-btn');
    var removeTodoInput = document.getElementById('remove-todo-input');
    removeTodoButton.addEventListener('click', deleteTodo);

    var toggleTodoButton = document.getElementById('toggle-todo-btn');
    var toggleTodoInput = document.getElementById('toggle-todo-input');
    toggleTodoButton.addEventListener('click', toggleTodo);
  </script>
</body>

</html>